-- Generated by CSharp.lua Compiler
local System = System
local ETCold = ETCold
local ListDelegate = System.List(System.Delegate)
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.class("Game", function (namespace)
    local getThreadSynchronizationContext, getTimeInfo, getEventSystem, scene, getScene, getObjectPool, getIdGenerater, Update, 
    LateUpdate, FrameFinish, Close, class, static
    static = function (this)
      this.FrameFinishCallback = ListDelegate()
    end
    getThreadSynchronizationContext = function ()
      return ETCold.ThreadSynchronizationContext.getInstance()
    end
    getTimeInfo = function ()
      return ET.TimeInfo.Instance
    end
    getEventSystem = function ()
      return ET.EventSystem.getInstance()
    end
    getScene = function ()
      if scene ~= nil then
        return scene
      end
      local instanceIdStruct = System.new(ET.InstanceIdStruct, 3, class.Options.Process, 0)
      scene = ET.EntitySceneFactory.CreateScene1(instanceIdStruct:ToLong(), 0, ET.SceneType.Process, "Process")
      return scene
    end
    getObjectPool = function ()
      return ET.ObjectPool.getInstance()
    end
    getIdGenerater = function ()
      return ET.IdGenerater.Instance
    end
    Update = function ()
      getThreadSynchronizationContext():Update()
      getTimeInfo():Update()
      getEventSystem():Update()
    end
    LateUpdate = function ()
      getEventSystem():LateUpdate()
    end
    FrameFinish = function ()
      for _, action in System.each(class.FrameFinishCallback) do
        action()
      end
      class.FrameFinishCallback:Clear()
    end
    Close = function ()
      local default = scene
      if default ~= nil then
        default:Dispose()
      end
      scene = nil
      ET.ObjectPool.getInstance():Dispose()
      ET.EventSystem.getInstance():Dispose()
      ET.IdGenerater.Instance:Dispose()
    end
    class = {
      getThreadSynchronizationContext = getThreadSynchronizationContext,
      getTimeInfo = getTimeInfo,
      getEventSystem = getEventSystem,
      getScene = getScene,
      getObjectPool = getObjectPool,
      getIdGenerater = getIdGenerater,
      Update = Update,
      LateUpdate = LateUpdate,
      FrameFinish = FrameFinish,
      Close = Close,
      static = static
    }
    return class
  end)
end)
