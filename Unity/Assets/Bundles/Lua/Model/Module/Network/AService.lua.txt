-- Generated by CSharp.lua Compiler
local System = System
local ET
System.import(function (out)
  ET = out.ET
end)
System.namespace("ET", function (namespace)
  namespace.class("AService", function (namespace)
    local CreateConnectChannelId, CreateRandomLocalConn, CreateAcceptChannelId, OnAccept, OnRead, OnError, Destroy, RemoveChannel, 
    SendStream, GetOrCreate, __ctor__
    __ctor__ = function (this)
      this.ServiceType = ET.ServiceType.Outer
    end
    CreateConnectChannelId = function (this, localConn)
      local default = this.connectIdGenerater - 1
      this.connectIdGenerater = default
      return System.bor((System.sl(default, 32)), localConn)
    end
    CreateRandomLocalConn = function (this, random)
      return System.bor((1073741824 --[[1u << 30]]), ET.RandomEx.RandUInt32(random))
    end
    CreateAcceptChannelId = function (this, localConn)
      local default = this.acceptIdGenerater + 1
      this.acceptIdGenerater = default
      return System.bor((System.sl(default, 32)), localConn)
    end
    OnAccept = function (this, channelId, ipEndPoint)
      this.AcceptCallback(channelId, ipEndPoint)
    end
    OnRead = function (this, channelId, memoryStream)
      this.ReadCallback(channelId, memoryStream)
    end
    OnError = function (this, channelId, e)
      this:Remove(channelId)

      local default = this.ErrorCallback
      if default ~= nil then
        default(channelId, e)
      end
    end
    Destroy = function (this)
      this:Dispose()
    end
    RemoveChannel = function (this, channelId)
      this:Remove(channelId)
    end
    SendStream = function (this, channelId, actorId, stream)
      this:Send(channelId, actorId, stream)
    end
    GetOrCreate = function (this, id, address)
      this:Get(id, address)
    end
    return {
      base = function (out)
        return {
          System.IDisposable
        }
      end,
      connectIdGenerater = 2147483647 --[[Int32.MaxValue]],
      CreateConnectChannelId = CreateConnectChannelId,
      CreateRandomLocalConn = CreateRandomLocalConn,
      acceptIdGenerater = 1,
      CreateAcceptChannelId = CreateAcceptChannelId,
      OnAccept = OnAccept,
      OnRead = OnRead,
      OnError = OnError,
      Destroy = Destroy,
      RemoveChannel = RemoveChannel,
      SendStream = SendStream,
      GetOrCreate = GetOrCreate,
      __ctor__ = __ctor__
    }
  end)
end)
